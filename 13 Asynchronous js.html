<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>asynchronous js</title>
</head>

<body>
    <h1 class="h1">hello world</h1>
    <h1 class="h2">hello world</h1>
    <h1 class="h3">hello world</h1>
    <h1 class="h4">hello world</h1>
    <h1 class="h5">hello world</h1>
    <h1 class="h6">hello world</h1>
    <h1 class="h7">hello world</h1>

    <script>
        console.log("script starts")

        // settimeout
        // setTimeout(()=>{
        //     for(let i= 0; i < 10000; i++){
        //         console.log("first loop")
        //     }
        // }, 1000)
        // setTimeout(()=>{
        //     for(let i= 0; i < 1000; i++){
        //         console.log("second loop")
        //     }
        // }, 1000)

        // setInterval
        // setInterval(() => {
        //     for(let i = 0; i < 100; i++){
        //         console.log("hello world")
        //     }
        // }, 1000);

        console.log("script ends")

        // pyramid of doom
        const h1 = document.querySelector(".h1");
        const h2 = document.querySelector(".h2");
        const h3 = document.querySelector(".h3");
        const h4 = document.querySelector(".h4");
        const h5 = document.querySelector(".h5");
        const h6 = document.querySelector(".h6");
        const h7 = document.querySelector(".h7");

        // setTimeout(() => {
        //     h1.textContent = "heading 1";
        //     h1.style.color = "red";
        //     setTimeout(() => {
        //         h2.textContent = "heading 2";
        //         h2.style.color = "green";
        //         setTimeout(() => {
        //             h3.textContent = "heading 3";
        //             h3.style.color = "blue";
        //             setTimeout(() => {
        //                 h4.textContent = "heading 4";
        //                 h4.style.color = "yellow";
        //                 setTimeout(() => {
        //                     h5.textContent = "heading 5";
        //                     h5.style.color = "limegreen";
        //                     setTimeout(() => {
        //                         h6.textContent = "heading 6";
        //                         h6.style.color = "grey";
        //                         setTimeout(() => {
        //                             h7.textContent = "heading 7";
        //                             h7.style.color = "sky";
        //                         }, 1000);
        //                     }, 1000);
        //                 }, 1000);
        //             }, 1000);
        //         }, 1000);
        //     }, 1000);
        // }, 1000);

        function changetext(element, text, color, delay, onsuccess, onfailure) {
            setTimeout(() => {
                if (element) {
                    element.textContent = text;
                    element.style.color = color;
                    if (onsuccess) {
                        onsuccess()
                    }
                } else {
                    if (onfailure) {
                        onfailure()
                    }
                }
            }, delay);
        }

        changetext(h1, "heading 1", "red", 1000, () => {
            changetext(h2, "heading 2", "green", 1000, () => {
                changetext(h3, "heading 3", "blue", 1000, () => {
                    changetext(h4, "heading 4", "yellow", 1000, () => {
                        changetext(h5, "heading 5", "limegreen", 1000, () => {
                            changetext(h6, "heading 6", "sky", 1000, () => {
                                changetext(h7, "heading 1", "grey", 1000, () => {
                                }, () => {
                                    console.log("element does not exist")
                                })
                            }, () => {
                                console.log("element does not exist")
                            })
                        }, () => {
                            console.log("element does not exist")
                        })
                    }, () => {
                        console.log("element does not exist")
                    })
                }, () => {
                    console.log("element does not exist")
                })
            }, () => {
                console.log("element does not exist")
            })
        }, () => {
            console.log("element does not exist")
        })
    </script>
</body>

</html>